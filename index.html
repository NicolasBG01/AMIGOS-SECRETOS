<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amigo Secreto 2025</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        function AmigoSecreto() {
          const [accessCode, setAccessCode] = useState('');
          const [currentUser, setCurrentUser] = useState(null);
          const [error, setError] = useState('');
          const [wishlist, setWishlist] = useState(['', '', '']);
          const [saved, setSaved] = useState(false);
          const [allWishlists, setAllWishlists] = useState({});
	  const [spinning, setSpinning] = useState(false);
  const [showResult, setShowResult] = useState(false);


  const participants = {
  'alber12': 'ALBERTO',
  'yami45': 'YAMILE',
  'dani67': 'DANIEL',
  'oma13': 'OMAIRA',
  'jarvi47': 'JARVI',
  'juli59': 'JULIAN',
  'mar65': 'MARTHA',
  'sebas32': 'SEBASTIAN',
  'adri95': 'ADRIANA',
  'nico05': 'NICOLAS',

};

const assignments = {
  'ALBERTO': 'NICOLAS',
  'YAMILE': 'JULIAN',
  'DANIEL': 'OMAIRA',
  'OMAIRA': 'SEBASTIAN',
  'JARVI': 'ADRIANA',
  'JULIAN': 'MARTHA',
  'MARTHA': 'ALBERTO',
  'SEBASTIAN': 'DANIEL',
  'ADRIANA': 'JARVI',
  'NICOLAS': 'YAMILE'
};

          const deadline = new Date('2025-12-31T23:59:59');

          useEffect(() => {
            const saved = localStorage.getItem('wishlists');
            if (saved) {
              setAllWishlists(JSON.parse(saved));
            }
          }, []);

          useEffect(() => {
            if (currentUser && allWishlists[currentUser]) {
              setWishlist(allWishlists[currentUser]);
            }
          }, [currentUser, allWishlists]);

          const addWishItem = () => {
            if (wishlist.length < 10) {
              setWishlist([...wishlist, '']);
            }
          };

          const updateWishItem = (index, value) => {
            const newWishlist = [...wishlist];
            newWishlist[index] = value;
            setWishlist(newWishlist);
          };

          const removeWishItem = (index) => {
            if (wishlist.length > 1) {
              const newWishlist = wishlist.filter((_, i) => i !== index);
              setWishlist(newWishlist);
            }
          };

          const saveWishlist = () => {
            const validItems = wishlist.filter(item => item.trim() !== '');
            const updatedWishlists = {
              ...allWishlists,
              [currentUser]: validItems.length > 0 ? validItems : ['']
            };
            
            setAllWishlists(updatedWishlists);
            localStorage.setItem('wishlists', JSON.stringify(updatedWishlists));
            
            setSaved(true);
            setTimeout(() => setSaved(false), 2000);
          };

          const revealAmigo = () => {
            const code = accessCode.trim().toLowerCase();
            
            if (participants[code]) {
              setCurrentUser(participants[code]);
              setError('');
            } else {
              setError('C√≥digo incorrecto. Verifica tu c√≥digo de acceso.');
              setAccessCode('');
            }
          };

          const logout = () => {
            setCurrentUser(null);
            setAccessCode('');
            setWishlist(['', '', '']);
          };

          const getDaysRemaining = () => {
            const now = new Date();
            const diff = deadline - now;
            const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
            return days;
          };

          const daysRemaining = getDaysRemaining();
          const amigoSecreto = currentUser ? assignments[currentUser] : null;
          const amigoWishlist = amigoSecreto && allWishlists[amigoSecreto] 
            ? allWishlists[amigoSecreto].filter(item => item.trim() !== '')
            : [];

          const GiftIcon = () => (
            <svg className="w-16 h-16 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7" />
            </svg>
          );

          const CalendarIcon = () => (
            <svg className="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
          );

          const EyeIcon = () => (
            <svg className="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
          );

          const HeartIcon = () => (
            <svg className="w-6 h-6 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
          );

          const ListIcon = () => (
            <svg className="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 10h16M4 14h16M4 18h16" />
            </svg>
          );

          const SaveIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
            </svg>
          );

          const CheckIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
            </svg>
          );

          return (
            <div className="min-h-screen bg-gradient-to-br from-red-50 via-green-50 to-red-100 p-4 pb-12">
              <div className="max-w-2xl mx-auto">
                
                <div className="text-center mb-8 pt-8">
                  <div className="flex justify-center mb-4">
                    <GiftIcon />
                  </div>
                  <h1 className="text-4xl font-bold text-gray-800 mb-2">Amigo Secreto</h1>
                  <p className="text-gray-600">Intercambio de regalos 2025</p>
                  
                  <div className="mt-4 inline-flex items-center gap-2 px-4 py-2 bg-red-100 rounded-full">
                    <CalendarIcon />
                    <span className="font-semibold text-red-600">
                      {daysRemaining > 0 
                        ? `${daysRemaining} ${daysRemaining === 1 ? 'd√≠a' : 'd√≠as'} para el 31 de diciembre`
                        : '¬°Hoy es el d√≠a!'
                      }
                    </span>
                  </div>
                </div>

                {!currentUser ? (
                  <div className="bg-white rounded-2xl shadow-xl p-8">
                    <div className="flex items-center gap-2 mb-6">
                      <EyeIcon />
                      <h2 className="text-2xl font-bold text-gray-800">Ingresa tu C√≥digo</h2>
                    </div>

                    <p className="text-gray-600 mb-6">
                      Introduce el c√≥digo que recibiste para ver qui√©n es tu amigo secreto y compartir tu lista de deseos.
                    </p>

                    <input
                      type="text"
                      value={accessCode}
                      onChange={(e) => setAccessCode(e.target.value)}
                      placeholder="Ejemplo: alber12"
                      className="w-full px-4 py-3 mb-4 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none font-mono text-center text-lg"
                      onKeyPress={(e) => e.key === 'Enter' && revealAmigo()}
                    />

                    {error && (
                      <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm">
                        {error}
                      </div>
                    )}

                    <button
                      onClick={revealAmigo}
                      className="w-full py-4 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg font-semibold hover:from-green-600 hover:to-blue-600 transition text-lg"
                    >
                      Ver mi amigo secreto
                    </button>

                    <div className="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                      <p className="text-sm text-blue-800">
                        üí° <strong>Consejo:</strong> Si no tienes tu c√≥digo, contacta al organizador del intercambio.
                      </p>
                    </div>
                  </div>
                ) : (
                  <div className="space-y-6">
                    
                    <div className="bg-white rounded-2xl shadow-xl p-8">
                      <div className="text-center mb-6">
                        <h2 className="text-2xl font-bold text-gray-800 mb-2">
                          ¬°Hola, {currentUser}! üëã
                        </h2>
                        <button
                          onClick={logout}
                          className="text-sm text-gray-500 hover:text-gray-700"
                        >
                          Salir
                        </button>
                      </div>

                      <div className="text-center">
                        <div className="flex justify-center mb-4">
                          <GiftIcon />
                        </div>
                        <p className="text-gray-600 mb-4">Tu amigo secreto es:</p>
                        
                        {/* Ruleta del Amigo Secreto */}
<div className="p-6 bg-white rounded-xl border-4 border-red-300 shadow-lg mb-4 flex flex-col items-center">

  {!showResult ? (
    <>
      <div
        className={`w-48 h-48 rounded-full border-8 border-red-400 flex items-center justify-center text-center text-xl font-bold text-gray-700 transition-all`}
        style={{
          transform: spinning ? 'rotate(1440deg)' : 'rotate(0deg)',
          transition: spinning ? 'transform 3s ease-out' : 'none',
        }}
      >
        üéÅ
      </div>

      <button
        onClick={() => {
          setSpinning(true);
          setTimeout(() => {
            setSpinning(false);
            setShowResult(true);
          }, 3000); // Tiempo de giro
        }}
        className="mt-6 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold rounded-lg shadow hover:from-green-600 hover:to-blue-600 transition"
      >
        Girar ruleta
      </button>
    </>
  ) : (
    <div className="p-6 bg-gradient-to-r from-red-100 to-green-100 rounded-xl border-4 border-red-300 shadow-lg text-center">
      <p className="text-xl text-gray-600 mb-2">Tu amigo secreto es:</p>
      <p className="text-4xl font-bold text-gray-800">{amigoSecreto}</p>
    </div>
  )}

</div>


                        <div className="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                          <p className="text-sm text-yellow-800">
                            ü§´ ¬°Recuerda mantenerlo en secreto! No le cuentes a nadie qui√©n te toc√≥.
                          </p>
                        </div>
                      </div>
                    </div>

                    {amigoWishlist.length > 0 && (
                      <div className="bg-white rounded-2xl shadow-xl p-8">
                        <div className="flex items-center gap-2 mb-6">
                          <HeartIcon />
                          <h2 className="text-2xl font-bold text-gray-800">
                            Lista de Deseos de {amigoSecreto}
                          </h2>
                        </div>

                        <p className="text-gray-600 mb-6">
                          Estas son las ideas de regalo que {amigoSecreto} comparti√≥ contigo:
                        </p>

                        <div className="space-y-3">
                          {amigoWishlist.map((item, index) => (
                            <div key={index} className="flex items-start gap-3 p-4 bg-pink-50 border-2 border-pink-200 rounded-lg">
                              <div className="flex items-center justify-center w-8 h-8 bg-pink-500 text-white rounded-full font-bold flex-shrink-0">
                                {index + 1}
                              </div>
                              <p className="text-gray-800 pt-1">{item}</p>
                            </div>
                          ))}
                        </div>

                        <div className="mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
                          <p className="text-sm text-green-800">
                            üí° Usa estas ideas como inspiraci√≥n para elegir el regalo perfecto.
                          </p>
                        </div>
                      </div>
                    )}

                    {amigoWishlist.length === 0 && (
                      <div className="bg-white rounded-2xl shadow-xl p-8">
                        <div className="flex items-center gap-2 mb-4">
                          <HeartIcon />
                          <h2 className="text-2xl font-bold text-gray-800">
                            Lista de Deseos de {amigoSecreto}
                          </h2>
                        </div>
                        <div className="p-6 bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg text-center">
                          <p className="text-gray-500">
                            {amigoSecreto} a√∫n no ha compartido su lista de deseos.
                          </p>
                          <p className="text-sm text-gray-400 mt-2">
                            Vuelve a consultar m√°s tarde
                          </p>
                        </div>
                      </div>
                    )}

                    <div className="bg-white rounded-2xl shadow-xl p-8">
                      <div className="flex items-center gap-2 mb-6">
                        <ListIcon />
                        <h2 className="text-2xl font-bold text-gray-800">Mi Lista de Deseos</h2>
                      </div>

                      <p className="text-gray-600 mb-6">
                        Comparte ideas de regalos que te gustar√≠a recibir. Tu amigo secreto podr√° ver esta lista para inspirarse. Recuerda que el presupuesto para el regalo es de $50.000 y ser lo mas detallado posible en cada regalo üòò
                      </p>

                      <div className="space-y-3 mb-4">
                        {wishlist.map((item, index) => (
                          <div key={index} className="flex gap-2">
                            <div className="flex items-center justify-center w-8 h-12 text-gray-400 font-semibold">
                              {index + 1}.
                            </div>
                            <input
                              type="text"
                              value={item}
                              onChange={(e) => updateWishItem(index, e.target.value)}
                              placeholder="Ej: Libro de cocina, Taza personalizada, etc."
                              className="flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:outline-none"
                            />
                            {wishlist.length > 1 && (
                              <button
                                onClick={() => removeWishItem(index)}
                                className="px-4 py-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition"
                              >
                                ‚úï
                              </button>
                            )}
                          </div>
                        ))}
                      </div>

                      {wishlist.length < 10 && (
                        <button
                          onClick={addWishItem}
                          className="w-full py-3 mb-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-purple-500 hover:text-purple-600 transition"
                        >
                          + Agregar otra idea
                        </button>
                      )}

                      <button
                        onClick={saveWishlist}
                        className={`w-full py-4 rounded-lg font-semibold transition flex items-center justify-center gap-2 ${
                          saved
                            ? 'bg-green-500 text-white'
                            : 'bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600'
                        }`}
                      >
                        {saved ? (
                          <>
                            <CheckIcon />
                            ¬°Guardado!
                          </>
                        ) : (
                          <>
                            <SaveIcon />
                            Guardar mi lista de deseos
                          </>
                        )}
                      </button>

                      <div className="mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                        <p className="text-sm text-green-800">
                          üíö Tu amigo secreto podr√° ver esta lista para elegir el regalo perfecto para ti.
                        </p>
                      </div>
                    </div>

                  </div>
                )}

              </div>
            </div>
          );
        }

        ReactDOM.render(<AmigoSecreto />, document.getElementById('root'));
    </script>
</body>
</html>
